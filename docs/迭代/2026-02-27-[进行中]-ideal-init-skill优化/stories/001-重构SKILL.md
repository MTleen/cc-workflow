---
story_id: 001
title: 重构 SKILL.md
status: pending
depends_on: []
---

# Story 001: 重构 SKILL.md

## 上下文

### 需求来源
> 来源：P1-需求文档.md#四、SKILL.md 结构调整

**当前结构（9 步）**：
1. 确认目标路径
2. 检查全局配置
3. 安装/更新全局资源
4. 探测项目信息
5. 用户确认/修正
6. 扫描已有结构
7. 处理冲突文件
8. 生成项目结构
9. 输出初始化报告

**重构后结构（7 步）**：
1. 已初始化检测
2. 探测项目信息
3. 用户确认/修正
4. 生成 project-config.md
5. 追加 CLAUDE.md
6. 完整性校验
7. 输出初始化报告

**移除的步骤**：
- 确认目标路径 → 简化流程，默认当前目录
- 检查全局配置 → CLI 职责
- 安装/更新全局资源 → CLI 职责
- 扫描已有结构 → 简化流程，按需处理
- 处理冲突文件 → 简化流程，Step 4/5 单独处理

### 技术方案
> 来源：P3-技术方案.md#三、功能模块设计

职责边界：
- **Skill 负责**：已初始化检测、项目探测、配置生成、CLAUDE.md 追加、完整性校验
- **CLI 负责**：全局资源下载、目录结构创建

### 相关代码

已有文件：
- `.claude/skills/ideal-init/SKILL.md` - 当前 9 步流程定义

## 任务清单

- [ ] 任务 1: 备份现有 SKILL.md
- [ ] 任务 2: 重写 Overview 部分
  - [ ] 更新核心职责描述
  - [ ] 移除全局配置相关内容
- [ ] 任务 3: 重写 Workflow 部分
  - [ ] 定义新的 7 步流程
  - [ ] 更新流程图
- [ ] 任务 4: 重写 Step-by-Step 部分
  - [ ] Step 1: 已初始化检测
  - [ ] Step 2: 探测项目信息
  - [ ] Step 3: 用户确认/修正
  - [ ] Step 4: 生成 project-config.md
  - [ ] Step 5: 追加 CLAUDE.md
  - [ ] Step 6: 完整性校验
  - [ ] Step 7: 输出初始化报告
- [ ] 任务 5: 更新 Quality Checklist
- [ ] 任务 6: 更新 Common Mistakes
- [ ] 任务 7: 更新 References

## 验收标准

### 功能验收
- [ ] SKILL.md 包含 7 个步骤
- [ ] 每个步骤有清晰的输入输出定义
- [ ] Workflow 图与步骤一致
- [ ] 无 CLI 职责相关内容

### 代码质量
- [ ] Markdown 格式正确
- [ ] 无死链接
- [ ] 术语使用一致

## 实现笔记

<!-- 由 Claude 在执行过程中填写 -->
