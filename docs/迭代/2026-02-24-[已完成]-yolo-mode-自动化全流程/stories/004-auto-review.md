---
story_id: "004"
title: 自动评审模块
status: pending
depends_on: []
---

# Story 004: 自动评审模块

## 上下文

### 需求来源
> 来源：P1-需求文档.md#三、功能需求

**F003 自动评审机制**：大模型自动进行阶段评审并记录结果

评审阶段：P4、P6、P8、P10、P12、P14

评审结果处理：
- 评审通过：继续下一阶段
- 评审不通过：生成修改建议，自动修复后重新评审
- 连续 3 次不通过：触发熔断机制，暂停并通知用户

### 技术方案
> 来源：P3-技术方案.md#三、功能模块设计

**M005 自动评审**：对各阶段输出进行自动评审

评审标准：
| 阶段 | 评审项 | 通过标准 |
|------|--------|----------|
| P4 | 技术方案 | 架构合理、技术可行、风险已识别 |
| P6 | 计划 | 任务完整、依赖清晰、估算合理 |
| P8 | 测试用例 | 覆盖率 ≥ 80%、边界条件覆盖 |
| P10 | 代码 | 规范符合、安全检查通过、可维护 |
| P12 | 测试报告 | 通过率 ≥ 80%、缺陷已修复 |
| P14 | 维基文档 | 完整、准确、可读 |

### 相关代码

待创建的文件：
- `.claude/skills/ideal-yolo/scripts/yolo_review.py` - 自动评审脚本
- `.claude/skills/ideal-yolo/references/review-standards.md` - 评审标准
- `tests/test_yolo_review.py` - 单元测试

## 任务清单

- [ ] T1: 定义评审标准数据结构（ReviewStandard, ReviewResult）
- [ ] T2: 实现 auto_review 函数（执行自动评审）
- [ ] T3: 实现评审检查清单应用（apply_checklist）
- [ ] T4: 实现评审结果生成（generate_review_log）

## 验收标准

### 功能验收
- [ ] 评审标准可按阶段查询
- [ ] auto_review 返回正确的结果（passed, comments, suggestions）
- [ ] 检查清单逐项验证
- [ ] 评审日志格式正确

### 代码质量
- [ ] 测试覆盖率 > 80%
- [ ] 无 Lint 警告
- [ ] 评审标准可扩展

## 实现笔记

<!-- 由 Claude 在执行过程中填写 -->
