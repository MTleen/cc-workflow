# Superpowers Skills 与本工作流差距分析报告

## 分析目的

明确 Superpowers 开源框架的能力边界，识别本工作流需要补充或定制开发的内容，为后续 skill 定制化提供依据。

---

## 一、Superpowers Skills 能力概览

### 1.1 已提供的 14 个 Skills

| 分类 | Skill 名称 | 核心能力 |
|------|-----------|----------|
| **元技能** | using-superpowers | 技能发现与调用入口 |
| | writing-skills | 技能自我改进（TDD for docs） |
| **工作流** | brainstorming | 苏格拉底式需求细化 |
| | writing-plans | 生成详细实施计划 |
| | executing-plans | 批量执行计划（独立会话） |
| | subagent-driven-development | 子代理并行开发（当前会话） |
| | dispatching-parallel-agents | 并行调查独立问题 |
| | finishing-a-development-branch | 分支完成处理 |
| **质量** | test-driven-development | RED-GREEN-REFACTOR 循环 |
| | requesting-code-review | 派遣代码审查子代理 |
| | receiving-code-review | 处理审查反馈 |
| | verification-before-completion | 完成前验证 |
| **基础设施** | using-git-worktrees | Git worktree 隔离环境 |
| | systematic-debugging | 系统化调试方法论 |

### 1.2 Superpowers 的设计特点

1. **通用性优先**：不绑定特定团队结构、文档格式、存储位置
2. **方法论导向**：提供"如何思考"而非"输出什么格式"
3. **单会话聚焦**：skills 之间通过手动调用或自动触发串联，无中央编排
4. **无状态管理**：不维护流程状态，每次调用相对独立
5. **无通知机制**：依赖人工检查结果

---

## 二、本工作流的核心需求

### 2.1 16 阶段流程定义

| 阶段组 | 阶段 | 执行者 | 输入 | 输出 |
|--------|------|--------|------|------|
| **规划** | P1 需求编写 | Claude | 需求想法 | 需求文档.md |
| | P2 需求评审 | 人工 | 需求文档.md | 评审意见 |
| | P3 技术方案 | Claude | 需求文档.md | 技术方案.md |
| | P4 方案评审 | 人工 | 技术方案.md | 评审意见 |
| **准备** | P5 计划生成 | Claude | 技术方案.md | 编码计划.md |
| | P6 计划评审 | 人工 | 编码计划.md | 评审意见 |
| | P7 测试用例 | Claude | 需求+计划 | 测试用例.md |
| | P8 用例评审 | 人工 | 测试用例.md | 评审意见 |
| **执行** | P9 开发执行 | Claude | 编码计划.md | 代码 + MR |
| | P10 代码评审 | 人工 | MR | Approve/修改意见 |
| | P11 测试执行 | Claude | 测试用例.md | 测试报告.md |
| | P12 测试评审 | 人工 | 测试报告.md | 通过/修复 |
| **收尾** | P13 上线评审 | 人工 | 全部文档 | 上线许可 |
| | P14 部署上线 | 自动 | 代码 | 生产环境 |
| | P15 维基更新 | Claude | 代码+需求 | 维基文档 |
| | P16 维基评审 | 人工 | 维基文档 | 发布许可 |

### 2.2 本工作流的约束条件

| 约束维度 | 具体要求 |
|----------|----------|
| **团队规模** | 中型团队（5-15人） |
| **评审策略** | 按风险动态调整（小需求简化，大需求完整） |
| **风险评估** | 多维评分（影响范围+技术复杂度+业务风险）+ 人工可调整 |
| **文档模板** | 按项目类型动态选择（前端/后端/数据/运维） |
| **自动化程度** | 核心流程自动编排 + 人工可干预任意阶段 |
| **通知渠道** | 先实现单一 IM 渠道（企业微信/钉钉） |
| **Bug 流程** | 开发自测用 Superpowers，测试发现走 Issue + 正式闭环 |
| **维基范围** | 接口文档 + 用户手册 + 开发文档 + 运维文档 + FAQ |
| **CI/CD** | 待定（现有但不规范） |

### 2.3 存储结构规范

```
Obsidian Vault（文档中心）
vault/projects/{项目名}/
├── README.md              # 项目状态看板
├── 迭代/{迭代名}/
│   ├── 需求文档.md
│   ├── 技术方案.md
│   ├── 流程状态.md        # 状态控制文件
│   ├── 测试用例.md
│   └── 测试报告.md
└── Wiki/

GitLab 仓库（代码执行层）
repos/{项目}/
├── .claude/plans/         # 编码计划（临时）
├── src/
├── tests/
└── .gitlab-ci.yml
```

---

## 三、差距分析

### 3.1 能力覆盖矩阵

| 工作流阶段 | 对应 Superpowers Skill | 覆盖程度 | 差距说明 |
|------------|----------------------|----------|----------|
| P1 需求编写 | brainstorming | 🟡 部分 | 方法论可用，但缺少需求文档模板、存储位置规范 |
| P3 技术方案 | brainstorming + writing-plans | 🟡 部分 | 缺少技术方案模板、评审触发机制 |
| P5 计划生成 | writing-plans | 🟡 部分 | 缺少编码计划模板、存储到 `.claude/plans/` 的规范 |
| P7 测试用例 | test-driven-development (RED) | 🟡 部分 | 缺少测试用例文档模板、与 Obsidian 存储的集成 |
| P9 开发执行 | executing-plans / subagent-driven | 🟢 基本覆盖 | 需适配输出到 GitLab MR 的规范 |
| P10 代码评审 | requesting/receiving-code-review | 🟡 部分 | 缺少评审检查清单、评审通过/不通过的状态流转 |
| P11 测试执行 | test-driven-development (GREEN) | 🟡 部分 | 缺少测试报告模板 |
| P12 测试评审 | verification-before-completion | 🟡 部分 | 缺少测试评审的标准化流程 |
| P14 部署上线 | finishing-a-development-branch | 🟡 部分 | 缺少与 CI/CD 的集成（待定） |
| P15 维基更新 | writing-skills | 🔴 不适用 | writing-skills 是用于编写 skill 的，不是生成维基文档 |
| P2/P4/P6/P8/P12/P13/P16 评审 | 无直接对应 | 🔴 缺失 | Superpowers 无评审流程 skill |
| 风险评估 | 无 | 🔴 缺失 | 需要新增 |
| 流程编排 | 无 | 🔴 缺失 | 需要中央状态机和触发器 |
| 通知服务 | 无 | 🔴 缺失 | 需要新增 IM 集成 |
| Bug 正式流程 | systematic-debugging | 🟡 部分 | 需要扩展 Issue 创建、闭环、通知逻辑 |

### 3.2 差距分类汇总

#### A. 需要新增的能力（Superpowers 没有）

| 能力 | 描述 | 优先级 |
|------|------|--------|
| **流程编排器** | 状态机、阶段流转、触发器 | 高 |
| **评审 Skill** | 8个评审点的标准化流程、检查清单 | 高 |
| **风险评估 Skill** | 多维评分 + 人工调整 | 高 |
| **通知服务** | IM 通知集成 | 中 |
| **维基生成 Skill** | 5类文档的自动生成 | 中 |

#### B. 需要定制化的 Skills（基于 Superpowers 改造）

| 原 Skill | 定制化内容 |
|----------|-----------|
| brainstorming | 增加需求文档模板、技术方案模板、存储路径规范 |
| writing-plans | 增加编码计划模板、存储到 `.claude/plans/` 的规范 |
| test-driven-development | 分离为「测试用例编写」和「测试执行」两个 skill，增加文档模板 |
| requesting-code-review | 增加 MR 模板、评审检查清单 |
| verification-before-completion | 增加测试报告模板、测试评审流程 |
| finishing-a-development-branch | 增加 CI/CD 触发接口（待定） |
| systematic-debugging | 扩展为 Issue 创建 → 调试 → 闭环 → 通知的完整流程 |

#### C. 需要补充的配套内容

| 内容 | 描述 |
|------|------|
| **文档模板库** | 需求/方案/计划/用例/报告/维基 各类模板 |
| **项目类型配置** | 前端/后端/数据/运维 的模板和流程差异 |
| **角色权限定义** | 产品/开发/测试/运维 的职责边界 |
| **风险等级配置** | 低/中/高风险的流程差异定义 |

---

## 四、Superpowers 与本工作流的关系定位

### 4.1 关系模型

```
Superpowers Skills（通用方法论）
        │
        │  借鉴思想、参考模式
        │  不直接使用，而是作为设计参考
        ▼
┌─────────────────────────────────────────────────┐
│  定制化 Skills（本项目专用）                      │
│                                                 │
│  ├── 符合本工作流的文档模板格式                   │
│  ├── 符合本工作流的存储位置规范                   │
│  ├── 符合本工作流的输入输出契约                   │
│  ├── 符合本工作流的触发机制                       │
│  └── 符合本工作流的团队角色分工                   │
└─────────────────────────────────────────────────┘
        │
        │ 被 流程编排器 调用
        ▼
┌─────────────────────────────────────────────────┐
│  流程编排层                                      │
│                                                 │
│  ├── 状态机（16阶段流转）                        │
│  ├── 触发器（文件变化/Webhook/定时）             │
│  ├── 风险评估（动态流程选择）                    │
│  └── 通知服务（IM 推送）                         │
└─────────────────────────────────────────────────┘
        │
        │ 驱动
        ▼
    16 阶段研发工作流
```

### 4.2 核心结论

1. **Superpowers 是能力底座，不是直接解决方案**
   - 提供了优秀的方法论（TDD、子代理、代码审查）
   - 但不包含企业级流程管理能力

2. **本工作流需要构建三层结构**
   - **Skills 层**：基于 Superpowers 思想定制，符合本工作流规范
   - **编排层**：状态机 + 触发器 + 通知，Superpowers 没有
   - **模板层**：文档模板 + 配置，Superpowers 没有

3. **差距的本质不是"有无"，而是"通用 vs 定制"**
   - Superpowers：灵活、通用、方法论导向
   - 本工作流：标准化、开箱即用、流程导向

---

## 五、后续行动建议

1. **创建 `skills/` 目录**，存放定制化 skills
2. **逐个 skill 进行定制化设计**，明确定义：
   - 触发条件（何时调用）
   - 输入文件（从哪里读取）
   - 输出文件（生成什么、存到哪里）
   - 文档模板（输出格式）
   - 完成条件（何时算完成）
3. **设计流程编排器架构**
4. **设计风险评估逻辑**

---

*文档生成日期: 2026-02-15*
