---
title: 常见问题
description: CC-Workflow 使用过程中的常见问题解答
sidebar_position: 5
tags: [FAQ, 问题, 排错]
---

# 常见问题

本文档整理了 CC-Workflow 使用过程中的常见问题，按场景分类。

---

## 流程相关

### Q1: 如何知道当前流程处于哪个阶段？

**A**: 查看对应需求的流程状态文件：

```bash
cat docs/迭代/{需求名称}/流程状态.md
```

文件中的 `current_phase` 字段显示当前阶段，例如 `current_phase: P6` 表示当前处于 P6 计划评审阶段。

---

### Q2: 评审不通过怎么办？

**A**: 评审不通过时，有两种处理方式：

1. **提出修改意见**：在对话中或文档注释中说明需要修改的内容，Claude 会根据反馈重新生成
2. **直接编辑文档**：对于小幅修改，可以直接编辑对应的文档文件

修改完成后，重新进行评审。

---

### Q3: 可以跳过某些阶段吗？

**A**: 一般情况下**不建议跳过阶段**。每个阶段都有其特定目的：

- 规划阶段确保需求清晰
- 准备阶段确保方案可行
- 执行阶段确保质量达标
- 收尾阶段确保文档完整

如有特殊需求，可手动修改 `流程状态.md` 中的 `current_phase` 字段，但需自行承担风险。

---

### Q4: 多个需求可以并行吗？

**A**: **可以**。每个需求在 `docs/迭代/` 目录下有独立的子目录，流程状态互不影响：

```
docs/迭代/
├── 用户登录/          # 需求 A
│   └── 流程状态.md    # 独立状态
├── 订单管理/          # 需求 B
│   └── 流程状态.md    # 独立状态
└── 支付集成/          # 需求 C
    └── 流程状态.md    # 独立状态
```

---

### Q5: 如何触发下一个阶段？

**A**: 修改流程状态文件中的评审状态字段：

```yaml
# 评审通过，触发下一阶段
requirement_review: approved
```

| 状态 | 含义 |
|------|------|
| `pending` | 等待评审 |
| `approved` | 评审通过，触发下一阶段 |
| `rejected` | 评审拒绝，需重新执行 |

---

## 文档相关

### Q6: 各阶段生成的文档在哪里？

**A**: 所有文档位于 `docs/迭代/{需求名称}/` 目录：

| 文件 | 阶段 | 内容 |
|------|------|------|
| `P1-需求文档.md` | P1 | 需求描述、验收标准 |
| `P3-技术方案.md` | P3 | 架构设计、技术选型 |
| `P5-编码计划.md` | P5 | 任务拆分、排期 |
| `P7-测试用例.md` | P7 | 测试场景、预期结果 |
| `P11-测试报告.md` | P11 | 测试结果、缺陷记录 |
| `流程状态.md` | 全流程 | 阶段流转控制 |

---

### Q7: 故事文件是什么？有什么用？

**A**: 故事文件是 P5 阶段生成的原子化任务单元。

**位置**：`docs/迭代/{需求名称}/stories/`

**作用**：
- P9 开发执行时只加载当前故事文件
- 实现上下文隔离，避免加载无关信息
- 降低 Token 消耗 70-90%

**结构**：
```
stories/
├── index.md           # 故事索引（状态追踪）
├── 001-用户认证.md     # 故事 1
├── 002-密码加密.md     # 故事 2
└── 003-会话管理.md     # 故事 3
```

---

### Q8: 流程状态文件有哪些字段？

**A**: 流程状态文件使用 YAML frontmatter 格式：

```yaml
---
current_phase: P6              # 当前阶段
requirement_review: approved   # P2 评审状态
solution_review: approved      # P4 评审状态
plan_review: pending          # P6 评审状态
test_case_review: pending     # P8 评审状态
code_review: pending          # P10 评审状态
test_exec_review: pending     # P12 评审状态
release_review: pending       # P13 评审状态
wiki_review: pending          # P16 评审状态
stories_dir: docs/迭代/用户登录/stories/
---
```

---

## 故障排除

### Q9: Claude 没有继续执行下一阶段？

**A**: 检查以下几点：

1. **流程状态**：确认上一阶段评审状态为 `approved`
2. **文档完整**：确认必要的文档文件已生成
3. **手动触发**：使用对应命令手动触发

```bash
# 查看当前状态
cat docs/迭代/{需求名}/流程状态.md

# 手动触发 P3 技术方案
/ideal-dev-solution
```

---

### Q10: 生成的文档内容不准确？

**A**: 处理方式：

1. **评审阶段反馈**：在评审时明确提出需要修改的内容
2. **直接编辑**：对于小幅问题，直接编辑文档文件
3. **重新生成**：对于较大问题，可要求 Claude 重新生成

---

### Q11: 代码 MR 创建失败？

**A**: 可能原因和解决方案：

| 原因 | 解决方案 |
|------|----------|
| Git 配置问题 | 检查 Git Token 权限 |
| 分支冲突 | 解决冲突后重试 |
| 远程仓库连接问题 | 检查网络和仓库地址 |
| 权限不足 | 确认有仓库写权限 |

---

### Q12: 测试执行失败怎么办？

**A**: 测试失败时的处理流程：

1. 查看 `P11-测试报告.md` 了解失败原因
2. 如果是代码问题，记录缺陷并返回 P9 修复
3. 如果是测试用例问题，返回 P7 更新用例
4. 修复后重新执行测试

---

## 最佳实践

### Q13: 需求描述应该多详细？

**A**: 需求描述越详细越好，有助于更准确的需求收集。

**好的描述**：
```
需要添加用户登录功能：
- 支持邮箱和手机号两种登录方式
- 登录失败 3 次后锁定账户 15 分钟
- 支持记住密码功能，有效期 7 天
- 登录成功后跳转到首页
```

**不够好的描述**：
```
加个登录功能
```

---

### Q14: 评审时应该关注什么？

**A**: 各评审阶段的关注点：

| 阶段 | 关注点 |
|------|--------|
| P2 需求评审 | 功能完整性、验收标准清晰度、边界情况 |
| P4 方案评审 | 技术选型合理性、架构设计、风险可控性 |
| P6 计划评审 | 任务拆分粒度、依赖关系、排期合理性 |
| P8 用例评审 | 覆盖完整性、边界值、异常场景 |
| P10 代码评审 | 代码质量、安全性、可维护性、测试覆盖 |
| P12 测试评审 | 通过率、遗留缺陷、风险评估 |
| P13 上线评审 | 功能完整性、回滚方案、监控告警 |
| P16 维基评审 | 内容准确性、用户可读性 |

---

### Q15: 如何保证文档与代码同步？

**A**: CC-Workflow 采用「文档驱动开发」模式：

1. **先文档后代码**：需求文档定义「做什么」→ 技术方案定义「怎么做」→ 代码实现
2. **变更先改文档**：需求变更时，先更新需求文档，再让 Claude 重新执行
3. **自动更新 Wiki**：P15 阶段 Claude 会自动更新 Wiki 文档

---

## 其他问题

### Q16: 如何在新项目中使用 CC-Workflow？

**A**: 使用 `/ideal-init` 命令初始化：

```
/ideal-init
```

该命令会：
- 创建 `.claude/` 目录结构
- 生成 `project-config.md` 配置文件
- 复制 Agents 和 Skills 定义

---

### Q17: 可以自定义 Skills 吗？

**A**: **可以**。详见 [Skill 开发指南](../dev-guide/skill-development.md)。

---

### Q18: 可以自定义 Agents 吗？

**A**: **可以**。详见 [Agent 开发指南](../dev-guide/agent-development.md)。

---

### Q19: 遇到其他问题怎么办？

**A**:
1. 查看本文档是否有相关解答
2. 查看 [术语表](./glossary.md) 了解核心概念
3. 查看 [架构设计](../dev-guide/architecture.md) 理解系统原理
4. 在项目 Issue 中提问
