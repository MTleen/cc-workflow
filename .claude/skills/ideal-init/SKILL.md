---
name: ideal-init
description: Use when initializing a new project to CC-Workflow, migrating an existing project, or user mentions "åˆå§‹åŒ–é¡¹ç›®", "æ¥å…¥å·¥ä½œæµ", "/ideal-init". Sets up global agents/skills and creates project-level configuration.
---

# ideal-initï¼ˆé¡¹ç›®åˆå§‹åŒ–ï¼‰

## Overview

CC-Workflow é¡¹ç›®åˆå§‹åŒ– Skillï¼Œå®ç°åˆ†çº§é…ç½®æ¶æ„ï¼š
- **å…¨å±€é…ç½®**ï¼šagents å’Œ skills å®‰è£…åˆ° `~/.claude/`
- **é¡¹ç›®é…ç½®**ï¼šåªä¿ç•™ `project-config.md` å’Œæ–‡æ¡£ç»“æ„

**ä¸åœ¨ 16 é˜¶æ®µä¸­** - åœ¨å¼€å§‹ä»»ä½•éœ€æ±‚ä¹‹å‰ç‹¬ç«‹è°ƒç”¨ã€‚

## HARD GATE

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ALWAYS CHECK GLOBAL CONFIG BEFORE CREATING PROJECT STRUCTURE    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**å…¨å±€ agents/skills å¿…é¡»å­˜åœ¨ä¸”æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰èƒ½ç»§ç»­é¡¹ç›®åˆå§‹åŒ–ã€‚**

## When to Use

- æ–°é¡¹ç›®éœ€è¦æ¥å…¥ CC-Workflow
- è€é¡¹ç›®è¿ç§»åˆ°å·¥ä½œæµä½“ç³»
- ç”¨æˆ·è¯´ "åˆå§‹åŒ–é¡¹ç›®"ã€"æŠŠè¿™ä¸ªé¡¹ç›®æ¥å…¥å·¥ä½œæµ"
- ç”¨æˆ·è§¦å‘ `/ideal-init`

## Workflow

```dot
digraph init_workflow {
    rankdir=TB;

    start [label="ç”¨æˆ·è§¦å‘ init"];
    step1 [label="1. ç¡®è®¤ç›®æ ‡è·¯å¾„"];
    step2 [label="2. æ£€æŸ¥å…¨å±€é…ç½®\n~/.claude/"];
    step3 [label="3. å®‰è£…/æ›´æ–°å…¨å±€èµ„æº"];
    step4 [label="4. æ¢æµ‹é¡¹ç›®ä¿¡æ¯"];
    step5 [label="5. ç”¨æˆ·ç¡®è®¤/ä¿®æ­£"];
    step6 [label="6. æ‰«æå·²æœ‰ç»“æ„"];
    step7 [label="7. å¤„ç†å†²çªæ–‡ä»¶"];
    step8 [label="8. ç”Ÿæˆé¡¹ç›®ç»“æ„"];
    step9 [label="9. è¾“å‡ºåˆå§‹åŒ–æŠ¥å‘Š"];
    done [label="å®Œæˆ"];

    start -> step1 -> step2 -> step3 -> step4 -> step5 -> step6 -> step7 -> step8 -> step9 -> done;
}
```

---

## Step 1: ç¡®è®¤ç›®æ ‡è·¯å¾„

**é»˜è®¤**ï¼šå½“å‰ç›®å½•

**è¯¢é—®**ï¼š
```
åˆå§‹åŒ–ç›®æ ‡è·¯å¾„ï¼š{current_dir}
æ˜¯å¦æ­£ç¡®ï¼Ÿå¦‚éœ€æŒ‡å®šå…¶ä»–è·¯å¾„ï¼Œè¯·æä¾›ã€‚
```

---

## Step 2: æ£€æŸ¥å…¨å±€é…ç½®

**æ£€æŸ¥ `~/.claude/` ç›®å½•**ï¼š

```
â–¡ ~/.claude/config.yaml æ˜¯å¦å­˜åœ¨
â–¡ ~/.claude/agents/ æ˜¯å¦åŒ…å« cc-workflow agents
â–¡ ~/.claude/skills/ æ˜¯å¦åŒ…å« cc-workflow skills
```

**é¢„æœŸå…¨å±€ç»“æ„**ï¼š

```
~/.claude/
â”œâ”€â”€ config.yaml           # å…¨å±€é…ç½®
â”œâ”€â”€ agents/               # å…¨å±€ agents
â”‚   â”œâ”€â”€ analyst.md
â”‚   â”œâ”€â”€ pm.md
â”‚   â”œâ”€â”€ architect.md
â”‚   â”œâ”€â”€ dev.md
â”‚   â”œâ”€â”€ qa.md
â”‚   â””â”€â”€ tech-writer.md
â””â”€â”€ skills/               # å…¨å±€ skills
    â”œâ”€â”€ ideal-requirement/
    â”œâ”€â”€ ideal-dev-solution/
    â””â”€â”€ ...ï¼ˆå…¶ä»– skillsï¼‰
```

---

## Step 3: å®‰è£…/æ›´æ–°å…¨å±€èµ„æº

### 3.1 å¦‚æœå…¨å±€é…ç½®ä¸å­˜åœ¨

**åˆ›å»º `~/.claude/config.yaml`**ï¼š

```yaml
registry:
  agents_repo: "https://gitea.example.com/cc-workflow/agents.git"
  skills_repo: "https://gitea.example.com/cc-workflow/skills.git"

installed:
  agents: {}
  skills: {}
```

**è¯¢é—®ç”¨æˆ·ä»“åº“åœ°å€**ï¼š
```
è¯·æä¾› CC-Workflow ä»“åº“åœ°å€ï¼š
- agents ä»“åº“ URLï¼ˆé»˜è®¤ï¼šä»å½“å‰ cc-workflow å¤åˆ¶ï¼‰
- skills ä»“åº“ URLï¼ˆé»˜è®¤ï¼šä»å½“å‰ cc-workflow å¤åˆ¶ï¼‰
```

### 3.2 å®‰è£…/æ›´æ–°é€»è¾‘

```
å¦‚æœ agents/skills ä¸å­˜åœ¨ï¼š
  â†’ ä»è¿œç¨‹ä»“åº“å…‹éš†åˆ° ~/.claude/

å¦‚æœå·²å­˜åœ¨ï¼š
  â†’ æ£€æŸ¥ç‰ˆæœ¬ï¼ˆè¯»å– config.yaml ä¸­çš„ installed è®°å½•ï¼‰
  â†’ å¦‚æœè¿œç¨‹æœ‰æ›´æ–°ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦å‡çº§
```

### 3.3 æ›´æ–° config.yaml

å®‰è£…/æ›´æ–°å®Œæˆåï¼Œè®°å½•ç‰ˆæœ¬ä¿¡æ¯ï¼š

```yaml
installed:
  agents:
    analyst: "1.0.0"
    pm: "1.0.0"
    # ...
  skills:
    ideal-requirement: "1.0.0"
    # ...
```

---

## Step 4: æ¢æµ‹é¡¹ç›®ä¿¡æ¯

**é˜…è¯» `references/detection-rules.md` äº†è§£æ¢æµ‹è§„åˆ™ã€‚**

### æ¢æµ‹å†…å®¹

| æ¢æµ‹é¡¹ | æ£€æµ‹æ–¹å¼ | ç”¨é€” |
|--------|----------|------|
| é¡¹ç›®åç§° | ç›®å½•åæˆ– Git ä»“åº“å | å¡«å…… project-config.md |
| è¯­è¨€ç±»å‹ | æ£€æµ‹ç‰¹å¾æ–‡ä»¶ | é€‰æ‹©å‘½ä»¤æ¨¡æ¿ |
| æ¡†æ¶ | è§£æä¾èµ–æ–‡ä»¶ | å¡«å……æŠ€æœ¯æ ˆ |
| Git çŠ¶æ€ | æ£€æµ‹ .git ç›®å½• | å¡«å…… Git é…ç½® |
| æµ‹è¯•å‘½ä»¤ | æ¨æ–­æˆ–è¯»å–é…ç½® | å¡«å……æ‰§è¡Œé…ç½® |
| æ„å»ºå‘½ä»¤ | æ¨æ–­æˆ–è¯»å–é…ç½® | å¡«å……æ‰§è¡Œé…ç½® |

### ç‰¹å¾æ–‡ä»¶æ˜ å°„

| ç‰¹å¾æ–‡ä»¶ | è¯­è¨€ | æµ‹è¯•å‘½ä»¤ | æ„å»ºå‘½ä»¤ |
|----------|------|----------|----------|
| `package.json` | Node.js | `npm test` | `npm run build` |
| `requirements.txt` / `pyproject.toml` | Python | `pytest` | `python setup.py build` |
| `go.mod` | Go | `go test ./...` | `go build` |
| `pom.xml` / `build.gradle` | Java | `mvn test` | `mvn package` |

---

## Step 5: ç”¨æˆ·ç¡®è®¤/ä¿®æ­£

**å±•ç¤ºæ¢æµ‹ç»“æœ**ï¼š

```
ğŸ“Š é¡¹ç›®æ¢æµ‹ç»“æœï¼š

| é¡¹ç›® | æ¢æµ‹å€¼ |
|------|--------|
| é¡¹ç›®åç§° | {name} |
| è¯­è¨€ | {language} |
| æ¡†æ¶ | {framework} |
| æµ‹è¯•å‘½ä»¤ | {test_cmd} |
| æ„å»ºå‘½ä»¤ | {build_cmd} |
| Git ä»“åº“ | {git_repo} |
| ä¸»åˆ†æ”¯ | {main_branch} |

ä»¥ä¸Šä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Ÿå¦‚éœ€ä¿®æ”¹è¯·å‘ŠçŸ¥ã€‚
```

---

## Step 6: æ‰«æå·²æœ‰ç»“æ„

**æ£€æŸ¥ç›®æ ‡è·¯å¾„ä¸­å·²å­˜åœ¨çš„æ–‡ä»¶**ï¼š

```
â–¡ CLAUDE.md
â–¡ .claude/project-config.md
â–¡ docs/Wiki/
â–¡ docs/è¿­ä»£/
â–¡ docs/é¡¹ç›®çŠ¶æ€.md
```

---

## Step 7: å¤„ç†å†²çªæ–‡ä»¶

**å¯¹äºæ¯ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œä½¿ç”¨ AskUserQuestion è¯¢é—®**ï¼š

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| è·³è¿‡ | ä¿ç•™ç°æœ‰æ–‡ä»¶ï¼Œä¸è¿›è¡Œä»»ä½•ä¿®æ”¹ |
| è¦†ç›– | ç”¨æ–°æ¨¡æ¿æ›¿æ¢ç°æœ‰æ–‡ä»¶ |
| åˆå¹¶ | å°è¯•åˆå¹¶å†…å®¹ï¼ˆä»…é€‚ç”¨äº project-config.mdï¼‰ |
| æŸ¥çœ‹å·®å¼‚ | æ˜¾ç¤ºç°æœ‰æ–‡ä»¶ä¸æ–°æ¨¡æ¿çš„å·®å¼‚åå†å†³å®š |

**é»˜è®¤è¡Œä¸º**ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰æ˜ç¡®é€‰æ‹©ï¼Œé»˜è®¤**è·³è¿‡**å·²å­˜åœ¨çš„æ–‡ä»¶ã€‚

---

## Step 8: ç”Ÿæˆé¡¹ç›®ç»“æ„

### 8.1 åˆ›å»ºç›®å½•ç»“æ„

```
{target-project}/
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ project-config.md
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ Wiki/
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ·æ–‡æ¡£/
â”‚   â”‚   â”œâ”€â”€ å¼€å‘æ–‡æ¡£/
â”‚   â”‚   â””â”€â”€ æ¥å£æ–‡æ¡£/
â”‚   â”œâ”€â”€ è¿­ä»£/
â”‚   â””â”€â”€ é¡¹ç›®çŠ¶æ€.md
â””â”€â”€ CLAUDE.md
```

### 8.2 ç”Ÿæˆæ–‡ä»¶

| æ–‡ä»¶ | æ¨¡æ¿ | æ•°æ®æ¥æº |
|------|------|----------|
| `.claude/project-config.md` | `project-config.md.tmpl` | æ¢æµ‹ç»“æœ |
| `CLAUDE.md` | `CLAUDE.md.tmpl` | æ¢æµ‹ç»“æœ |
| `docs/é¡¹ç›®çŠ¶æ€.md` | `flow-status.md.tmpl` | æ¢æµ‹ç»“æœ |

**æ¨¡æ¿è·¯å¾„**ï¼š`references/templates/`

---

## Step 9: è¾“å‡ºåˆå§‹åŒ–æŠ¥å‘Š

```
âœ“ CC-Workflow åˆå§‹åŒ–å®Œæˆ

å…¨å±€é…ç½®ï¼š
  âœ“ agents: {status} ({version})
  âœ“ skills: {status} ({version})

é¡¹ç›®ç»“æ„ï¼š
  âœ“ åˆ›å»º .claude/project-config.md
  âœ“ åˆ›å»º docs/Wiki/
  âœ“ åˆ›å»º docs/è¿­ä»£/
  âœ“ åˆ›å»º docs/é¡¹ç›®çŠ¶æ€.md
  {skip_symbol} CLAUDE.md: {skip_reason}

æ¢æµ‹ç»“æœï¼š
  é¡¹ç›®åç§°: {name}
  è¯­è¨€: {language}
  æ¡†æ¶: {framework}
  æµ‹è¯•å‘½ä»¤: {test_cmd}
  æ„å»ºå‘½ä»¤: {build_cmd}

åç»­æ­¥éª¤ï¼š
  1. æ£€æŸ¥ .claude/project-config.md ç¡®è®¤é…ç½®æ­£ç¡®
  2. è¿è¡Œ /ideal-requirement å¼€å§‹ç¬¬ä¸€ä¸ªéœ€æ±‚
```

---

## Quality Checklist

**Step 2-3 å®Œæˆæ£€æŸ¥**ï¼š
- [ ] æ£€æŸ¥äº† ~/.claude/config.yaml
- [ ] ç¡®è®¤å…¨å±€ agents/skills å­˜åœ¨
- [ ] å…¨å±€èµ„æºæ˜¯æœ€æ–°ç‰ˆæœ¬

**Step 4-5 å®Œæˆæ£€æŸ¥**ï¼š
- [ ] æ¢æµ‹äº†é¡¹ç›®åç§°
- [ ] æ¢æµ‹äº†è¯­è¨€å’Œæ¡†æ¶
- [ ] æ¢æµ‹äº† Git çŠ¶æ€
- [ ] ç”¨æˆ·ç¡®è®¤æˆ–ä¿®æ­£äº†æ¢æµ‹ç»“æœ

**Step 6-8 å®Œæˆæ£€æŸ¥**ï¼š
- [ ] æ‰«æäº†å·²æœ‰æ–‡ä»¶
- [ ] å¯¹å†²çªæ–‡ä»¶è¯¢é—®äº†ç”¨æˆ·
- [ ] åˆ›å»ºäº†æ‰€æœ‰å¿…éœ€ç›®å½•
- [ ] ç”Ÿæˆäº†æ‰€æœ‰å¿…éœ€æ–‡ä»¶

**Step 9 å®Œæˆæ£€æŸ¥**ï¼š
- [ ] è¾“å‡ºäº†å®Œæ•´åˆå§‹åŒ–æŠ¥å‘Š
- [ ] æŠ¥å‘ŠåŒ…å«åç»­æ­¥éª¤æŒ‡å¼•

---

## Common Mistakes

| é”™è¯¯ | æ­£ç¡®åšæ³• | HARD GATE |
|------|----------|-----------|
| è·³è¿‡å…¨å±€é…ç½®æ£€æŸ¥ | å¿…é¡»å…ˆæ£€æŸ¥ ~/.claude/ | âš ï¸ åˆ†çº§æ¶æ„åŸºç¡€ |
| ç›´æ¥è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶ | å¿…é¡»è¯¢é—®ç”¨æˆ· | - |
| ä½¿ç”¨ç¡¬ç¼–ç æ¢æµ‹è§„åˆ™ | é˜…è¯» detection-rules.md | - |
| å¿˜è®°è¾“å‡ºæŠ¥å‘Š | å¿…é¡»è¾“å‡ºå®Œæ•´æŠ¥å‘Š | - |
| åœ¨é¡¹ç›®ä¸­å¤åˆ¶ agents/skills | åªä¿ç•™ project-config.md | âš ï¸ åˆ†çº§æ¶æ„åŸåˆ™ |

---

## References

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `references/templates/CLAUDE.md.tmpl` | é¡¹ç›®æŒ‡ä»¤æ¨¡æ¿ |
| `references/templates/project-config.md.tmpl` | é¡¹ç›®é…ç½®æ¨¡æ¿ |
| `references/templates/flow-status.md.tmpl` | æµç¨‹çŠ¶æ€æ¨¡æ¿ |
| `references/detection-rules.md` | é¡¹ç›®ç±»å‹æ¢æµ‹è§„åˆ™ |

---

## Related Skills

| Skill | å…³ç³» |
|-------|------|
| ideal-requirement | init å®Œæˆåï¼Œç”¨æˆ·é€šå¸¸ä»æ­¤å¼€å§‹ç¬¬ä¸€ä¸ªéœ€æ±‚ |
| ideal-flow-control | init åˆ›å»ºçš„ `docs/é¡¹ç›®çŠ¶æ€.md` æ˜¯ flow-control çš„ç®¡ç†å¯¹è±¡ |
| ideal-dev-solution | init ç”Ÿæˆçš„ `project-config.md` ä¼šè¢« dev-solution è¯»å– |
