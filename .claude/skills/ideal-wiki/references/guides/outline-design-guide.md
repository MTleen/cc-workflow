# 大纲设计指南

## 概述

大纲设计是 Wiki 文档生成的第一阶段，目标是根据项目复杂度规划合理的文档结构，并获得用户确认。

**核心原则**：
- 文档数量和结构**动态决定**，不硬编码
- 必须获得**用户确认**后才能进入撰写阶段
- 大纲是文档质量的**基础保障**

---

## 复杂度评估框架

### 评估维度

| 维度 | 简单 (1分) | 中等 (2分) | 复杂 (3分) |
|------|------------|------------|------------|
| **功能模块** | 1-3 个独立功能 | 4-10 个功能，有模块划分 | 10+ 个功能，多子系统 |
| **技术栈** | 单一语言/框架 | 2-3 种技术组合 | 多语言/微服务/混合架构 |
| **用户群体** | 单一角色（如开发者） | 2-3 种角色 | 多种角色 + 第三方集成 |
| **接口类型** | 无对外接口 | REST API | REST + GraphQL + SDK + Webhook |
| **部署方式** | 单机部署 | Docker / 单一云服务 | K8s / 多云 / 混合部署 |

### 复杂度计算

```
复杂度总分 = 功能模块 + 技术栈 + 用户群体 + 接口类型 + 部署方式

- 5-7 分：简单项目
- 8-11 分：中等项目
- 12-15 分：复杂项目
```

---

## 文档结构设计

### 简单项目（5-7分）

**用户文档**（2-3 篇）：

| 文件 | 标题 | 内容范围 | 篇幅 |
|------|------|----------|------|
| index.md | 首页 | 项目介绍 + 导航 | 200-300 字 |
| quick-start.md | 快速开始 | 安装 + 核心功能 | 500-800 字 |
| faq.md | 常见问题 | 5-10 个 FAQ | 300-500 字 |

**开发文档**（2-3 篇）：

| 文件 | 标题 | 内容范围 | 篇幅 |
|------|------|----------|------|
| index.md | 首页 | 文档导航 | 200 字 |
| dev-env.md | 开发环境 | 环境搭建 | 500-800 字 |
| contributing.md | 贡献指南 | 开发流程 | 300-500 字 |

### 中等项目（8-11分）

**用户文档**（4-6 篇）：

| 文件 | 标题 | 内容范围 | 篇幅 |
|------|------|----------|------|
| index.md | 首页 | 项目介绍 + 导航 | 300-500 字 |
| quick-start.md | 快速开始 | 安装 + 核心流程 | 800-1200 字 |
| concepts.md | 核心概念 | 关键概念解释 | 500-800 字 |
| guide-{module}.md | 使用指南-{模块} | 按模块拆分 | 各 800-1200 字 |
| faq.md | 常见问题 | 10-20 个 FAQ | 500-800 字 |
| changelog.md | 更新日志 | 版本历史 | 持续更新 |

**开发文档**（4-6 篇）：

| 文件 | 标题 | 内容范围 | 篇幅 |
|------|------|----------|------|
| index.md | 首页 | 文档导航 | 200-300 字 |
| architecture.md | 架构设计 | 系统架构 | 1000-1500 字 |
| dev-env.md | 开发环境 | 环境搭建 | 800-1000 字 |
| code-structure.md | 代码结构 | 目录说明 | 500-800 字 |
| deployment.md | 部署指南 | 部署流程 | 800-1200 字 |
| contributing.md | 贡献指南 | 开发流程 | 500-800 字 |

### 复杂项目（12-15分）

**用户文档**（6-10 篇）：

使用多层级结构：

```
user-guide/
├── index.md
├── getting-started/
│   ├── installation.md
│   ├── quick-start.md
│   └── concepts.md
├── tutorials/
│   ├── tutorial-1.md
│   └── tutorial-2.md
├── guides/
│   ├── guide-{module-1}.md
│   ├── guide-{module-2}.md
│   └── ...
├── reference/
│   ├── configuration.md
│   ├── faq.md
│   └── troubleshooting.md
└── changelog.md
```

**开发文档**（6-10 篇）：

```
dev-guide/
├── index.md
├── architecture/
│   ├── overview.md
│   ├── components.md
│   └── data-flow.md
├── development/
│   ├── environment.md
│   ├── coding-standards.md
│   └── testing.md
├── deployment/
│   ├── local.md
│   ├── staging.md
│   └── production.md
├── api/
│   ├── overview.md
│   └── endpoints/
└── contributing.md
```

---

## 大纲文件格式

### 标准模板

```markdown
# Wiki 文档大纲

## 项目概述

| 项目属性 | 值 |
|----------|-----|
| 项目名称 | {name} |
| 复杂度评估 | {simple/medium/complex}（{score}分） |
| 目标读者 | {reader types} |
| 是否有 API | {yes/no} |
| 在线文档平台 | {Docusaurus/ReadTheDocs/其他} |

## 复杂度评估明细

| 维度 | 评分 | 说明 |
|------|------|------|
| 功能模块 | {1-3} | {说明} |
| 技术栈 | {1-3} | {说明} |
| 用户群体 | {1-3} | {说明} |
| 接口类型 | {1-3} | {说明} |
| 部署方式 | {1-3} | {说明} |
| **总分** | {5-15} | |

---

## 文档结构

### 用户文档集

目录：`docs/Wiki/user-guide/`

| 序号 | 文件名 | 标题 | 主题范围 | 预估篇幅 | 说明 |
|------|--------|------|----------|----------|------|
| 1 | index.md | 用户指南 | 导航和概述 | 300 字 | 首页 |
| 2 | ... | ... | ... | ... | ... |

### 开发文档集

目录：`docs/Wiki/dev-guide/`

| 序号 | 文件名 | 标题 | 主题范围 | 预估篇幅 | 说明 |
|------|--------|------|----------|----------|------|
| 1 | index.md | 开发文档 | 导航和概述 | 200 字 | 首页 |
| 2 | ... | ... | ... | ... | ... |

### API 文档集（如有）

目录：`docs/Wiki/api-guide/`

| 序号 | 文件名 | 标题 | 主题范围 | 预估篇幅 | 说明 |
|------|--------|------|----------|----------|------|
| 1 | index.md | API 文档 | 概览 | 300 字 | 首页 |
| 2 | ... | ... | ... | ... | ... |

---

## 设计说明

### 文档拆分依据

{解释为什么这样拆分，例如：}
- 用户文档按功能模块拆分，因为各模块相对独立
- 开发文档包含完整的架构说明，因为系统较为复杂

### 覆盖范围

**包含**：
- {列出文档覆盖的功能和场景}

**不包含**：
- {列出文档不覆盖的内容及原因}

### 特殊考虑

{如有特殊设计决策，在此说明}
```

---

## 用户确认流程

### 确认要点

向用户展示大纲时，明确以下几点：

1. **文档数量**：是否合理？是否需要增减？
2. **主题范围**：每篇文档的范围是否清晰？有无重叠或遗漏？
3. **拆分粒度**：是否需要进一步拆分或合并？
4. **覆盖范围**：是否覆盖了所有重要功能？

### 确认话术示例

```
📋 Wiki 大纲已生成，请审查：

**项目复杂度**：中等（9分）
- 功能模块：4 个（需求管理、开发流程、测试、部署）
- 技术栈：Markdown + Claude Code
- 用户群体：2 种（团队成员、Claude）

**文档结构**：
- 用户文档：5 篇
- 开发文档：5 篇

请确认：
1. 文档数量是否合适？
2. 主题范围是否清晰？
3. 是否需要调整拆分粒度？

回复「确认」继续，或提出修改意见。
```

### 常见调整请求

| 请求类型 | 处理方式 |
|----------|----------|
| 增加文档 | 评估是否真的需要，避免过度拆分 |
| 减少文档 | 评估是否会信息过载，建议保持合理拆分 |
| 合并文档 | 检查主题是否相关，避免混杂 |
| 拆分文档 | 检查当前篇幅是否过长（>3000字建议拆分） |
| 调整范围 | 更新主题范围描述，确保边界清晰 |

---

## 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|----------|
| 复杂度评估不准 | 文档结构不合理 | 按维度逐一评估 |
| 文档数量硬编码 | 不适应不同项目 | 根据复杂度动态决定 |
| 跳过用户确认 | 后期大量返工 | 必须获得用户确认 |
| 主题范围模糊 | 文档内容重叠 | 明确每篇文档的边界 |
| 忽略在线文档需求 | 后期格式调整 | 提前规划目录结构 |
