---
需求名称: CC-Workflow 自动化工作流平台
关联需求: P1-需求文档.md
关联计划: P5-编码计划.md
创建时间: 2026-02-18
当前阶段: P7
---

# P7-测试用例：CC-Workflow 自动化工作流平台

## 一、测试范围

### 1.1 测试目标

验证 CC-Workflow 自动化工作流平台的功能完整性、流程正确性和文档生成质量。

### 1.2 测试范围说明

| 测试类型 | 覆盖范围 | 测试数量 |
|----------|----------|----------|
| 功能测试 | 10 个功能模块（F001-F010） | 25 个 |
| 边界测试 | 输入边界、状态边界、流程边界 | 12 个 |
| 异常测试 | 错误处理、异常场景、容错机制 | 10 个 |
| 集成测试 | 端到端流程、模块集成 | 8 个 |

**总测试用例数：55 个**

---

## 二、功能测试用例

### 2.1 F001 需求管理（P1-P2）

#### TC-F001-01: 需求文档生成 - 软件功能类型

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F001-01 |
| **用例名称** | 需求文档生成 - 软件功能类型 |
| **优先级** | P0 |
| **前置条件** | 1. 项目根目录存在 CLAUDE.md 或 README.md<br>2. 用户有需求想法 |

**测试步骤**：
1. 用户调用 `/ideal-requirement` 并描述需求想法
2. 系统识别需求类型为"软件功能"
3. 系统加载 `software-feature.md` 模板
4. 系统通过苏格拉底式对话收集需求信息
5. 用户确认需求摘要
6. 系统生成 `P1-需求文档.md` 和 `流程状态.md`

**预期结果**：
- `docs/迭代/{需求名称}/P1-需求文档.md` 文件存在
- 文档包含完整的章节结构（背景、用户、功能、非功能、验收标准、风险）
- `流程状态.md` 中 P1 状态为 completed

---

#### TC-F001-02: 需求文档生成 - Bug 修复类型

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F001-02 |
| **用例名称** | 需求文档生成 - Bug 修复类型 |
| **优先级** | P0 |
| **前置条件** | 1. 项目根目录存在 CLAUDE.md 或 README.md<br>2. 用户提供 Bug 描述 |

**测试步骤**：
1. 用户调用 `/ideal-requirement` 并描述 Bug
2. 系统识别需求类型为"Bug 修复"
3. 系统加载 `bug-fix.md` 模板
4. 系统收集 Bug 信息（复现步骤、预期结果、实际结果）
5. 系统生成 Bug 修复需求文档

**预期结果**：
- 文档类型为 bug-fix
- 包含复现步骤、预期结果、实际结果等必要字段

---

#### TC-F001-03: 需求文档生成 - 重构优化类型

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F001-03 |
| **用例名称** | 需求文档生成 - 重构优化类型 |
| **优先级** | P1 |
| **前置条件** | 1. 项目根目录存在 CLAUDE.md 或 README.md<br>2. 用户提供重构描述 |

**测试步骤**：
1. 用户调用 `/ideal-requirement` 并描述重构需求
2. 系统识别需求类型为"重构优化"
3. 系统加载 `refactoring.md` 模板
4. 系统收集重构信息（现状、问题、目标）
5. 系统生成重构需求文档

**预期结果**：
- 文档类型为 refactoring
- 包含现状、问题、目标等必要字段

---

#### TC-F001-04: 需求评审通过

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F001-04 |
| **用例名称** | 需求评审通过触发下一阶段 |
| **优先级** | P0 |
| **前置条件** | 1. P1-需求文档.md 已生成<br>2. 流程状态为 P1 completed |

**测试步骤**：
1. 评审人员在 Obsidian 中查看 P1-需求文档.md
2. 评审人员确认需求内容正确
3. 评审人员将 `流程状态.md` 中 P2 状态改为 completed
4. 系统更新 current_phase 为 P3

**预期结果**：
- 流程状态中 P2 状态为 completed
- current_phase 更新为 P3
- 可以触发 P3 技术方案生成

---

### 2.2 F002 技术方案（P3-P4）

#### TC-F002-01: 技术方案生成

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F002-01 |
| **用例名称** | 技术方案自动生成 |
| **优先级** | P0 |
| **前置条件** | 1. P1-需求文档.md 存在<br>2. P2 需求评审已通过 |

**测试步骤**：
1. 调用技术方案生成 skill
2. 系统读取 P1-需求文档.md
3. 系统分析功能需求和非功能需求
4. 系统生成架构设计、技术选型、数据模型
5. 系统输出 P3-技术方案.md

**预期结果**：
- `docs/迭代/{需求名称}/P3-技术方案.md` 文件存在
- 包含系统架构图
- 包含技术选型表格
- 包含数据模型和接口设计
- 包含风险分析

---

#### TC-F002-02: 技术方案包含架构图

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F002-02 |
| **用例名称** | 技术方案包含可视化架构图 |
| **优先级** | P1 |
| **前置条件** | P3-技术方案.md 已生成 |

**测试步骤**：
1. 打开 P3-技术方案.md
2. 检查是否包含架构图（ASCII 或 Mermaid 格式）
3. 验证架构图与文字描述一致

**预期结果**：
- 架构图格式正确（可渲染）
- 展示了系统的核心组件
- 组件间的关系清晰

---

#### TC-F002-03: 方案评审通过

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F002-03 |
| **用例名称** | 方案评审通过触发下一阶段 |
| **优先级** | P0 |
| **前置条件** | 1. P3-技术方案.md 已生成<br>2. 流程状态为 P3 completed |

**测试步骤**：
1. 评审人员查看 P3-技术方案.md
2. 评审人员确认方案可行
3. 评审人员将 P4 状态改为 completed
4. 系统更新 current_phase 为 P5

**预期结果**：
- 流程状态中 P4 状态为 completed
- current_phase 更新为 P5
- 可以触发 P5 计划生成

---

### 2.3 F003 计划生成（P5-P6）

#### TC-F003-01: 编码计划生成

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F003-01 |
| **用例名称** | 编码计划自动生成 |
| **优先级** | P0 |
| **前置条件** | 1. P3-技术方案.md 存在<br>2. P4 方案评审已通过 |

**测试步骤**：
1. 调用计划生成 skill
2. 系统读取 P3-技术方案.md
3. 系统识别功能模块
4. 系统分解为原子任务
5. 系统按 TDD 模式组织任务
6. 系统输出 P5-编码计划.md

**预期结果**：
- `docs/迭代/{需求名称}/P5-编码计划.md` 文件存在
- 包含模块总览表
- 每个任务包含目标、步骤、验证标准
- 任务粒度为 2-5 分钟

---

#### TC-F003-02: 任务分解粒度正确

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F003-02 |
| **用例名称** | 任务分解粒度符合 TDD 规范 |
| **优先级** | P0 |
| **前置条件** | P5-编码计划.md 已生成 |

**测试步骤**：
1. 打开 P5-编码计划.md
2. 检查每个任务的步骤
3. 验证是否包含测试编写步骤
4. 验证是否遵循 RED-GREEN-REFACTOR 模式

**预期结果**：
- 每个任务包含"编写测试"步骤
- 每个任务包含"运行测试"步骤
- 任务步骤遵循 TDD 循环

---

#### TC-F003-03: 计划包含最佳实践调研任务

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F003-03 |
| **用例名称** | 编码计划包含最佳实践调研 |
| **优先级** | P1 |
| **前置条件** | P5-编码计划.md 已生成 |

**测试步骤**：
1. 打开 P5-编码计划.md
2. 检查每个模块是否以"最佳实践调研"任务开始
3. 验证调研任务包含参考资源

**预期结果**：
- 每个模块包含 Mx-0 调研任务
- 调研任务列出参考的 Superpowers skills
- 调研任务要求输出 research.md

---

### 2.4 F004 测试用例（P7-P8）

#### TC-F004-01: 测试用例自动生成

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F004-01 |
| **用例名称** | 测试用例自动生成 |
| **优先级** | P0 |
| **前置条件** | 1. P1-需求文档.md 存在<br>2. P5-编码计划.md 存在 |

**测试步骤**：
1. 调用测试用例生成 skill
2. 系统读取需求文档和编码计划
3. 系统提取功能点和验收标准
4. 系统生成功能测试用例
5. 系统生成边界测试用例
6. 系统生成异常测试用例
7. 系统输出 P7-测试用例.md

**预期结果**：
- `docs/迭代/{需求名称}/P7-测试用例.md` 文件存在
- 包含功能测试用例
- 包含边界测试用例
- 包含异常测试用例
- 包含测试覆盖率统计

---

### 2.5 F005 开发执行（P9-P10）

#### TC-F005-01: 开发任务执行

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F005-01 |
| **用例名称** | 开发任务按 TDD 模式执行 |
| **优先级** | P0 |
| **前置条件** | 1. P5-编码计划.md 存在<br>2. P6 计划评审已通过 |

**测试步骤**：
1. 调用开发执行 skill
2. 系统读取编码计划
3. 系统创建 Git 分支
4. 系统按 TDD 模式执行任务
5. 系统创建 Merge Request

**预期结果**：
- Git 分支已创建
- 代码已提交
- Merge Request 已创建
- 测试通过

---

#### TC-F005-02: TDD 强制规则

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F005-02 |
| **用例名称** | 无测试不写代码规则 |
| **优先级** | P0 |
| **前置条件** | 开发执行 skill 已启动 |

**测试步骤**：
1. 系统尝试先写实现代码
2. 验证系统是否阻止
3. 系统要求先写测试
4. 系统确认测试失败
5. 系统编写最小代码
6. 系统确认测试通过

**预期结果**：
- 无法在测试前编写实现代码
- 测试必须先失败（RED）
- 最小代码使测试通过（GREEN）

---

### 2.6 F006 测试执行（P11-P12）

#### TC-F006-01: 测试执行和报告生成

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F006-01 |
| **用例名称** | 测试执行和报告生成 |
| **优先级** | P0 |
| **前置条件** | 1. P7-测试用例.md 存在<br>2. P10 代码评审已通过 |

**测试步骤**：
1. 调用测试执行 skill
2. 系统读取测试用例
3. 系统执行测试
4. 系统收集测试结果
5. 系统生成 P11-测试报告.md

**预期结果**：
- `docs/迭代/{需求名称}/P11-测试报告.md` 文件存在
- 包含测试汇总统计
- 包含用例执行结果
- 包含缺陷记录（如有）

---

### 2.7 F007 维基管理（P13-P14）

#### TC-F007-01: 维基文档生成

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F007-01 |
| **用例名称** | 维基文档自动生成 |
| **优先级** | P0 |
| **前置条件** | 1. P12 测试评审已通过<br>2. 代码已完成 |

**测试步骤**：
1. 调用维基更新 skill
2. 系统读取代码和需求文档
3. 系统分析代码结构
4. 系统生成用户文档
5. 系统生成开发文档
6. 系统生成接口文档

**预期结果**：
- `docs/Wiki/用户文档/` 目录包含用户文档
- `docs/Wiki/开发文档/` 目录包含开发文档
- `docs/Wiki/接口文档/` 目录包含接口文档

---

#### TC-F007-02: 维基评审通过

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F007-02 |
| **用例名称** | 维基评审通过触发下一阶段 |
| **优先级** | P0 |
| **前置条件** | 1. P13 维基文档已生成<br>2. 流程状态为 P13 completed |

**测试步骤**：
1. 评审人员查看维基文档
2. 评审人员确认文档正确
3. 评审人员将 P14 状态改为 completed
4. 系统更新 current_phase 为 P15

**预期结果**：
- 流程状态中 P14 状态为 completed
- current_phase 更新为 P15
- 可以触发 P15 成果提交

---

### 2.8 F008 成果提交（P15）

#### TC-F008-01: 成果提交触发 CI/CD

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F008-01 |
| **用例名称** | 成果提交自动触发 CI/CD |
| **优先级** | P0 |
| **前置条件** | 1. P14 维基评审已通过<br>2. 所有文档已完成 |

**测试步骤**：
1. 评审人员将 P14 状态改为 completed
2. 系统更新 current_phase 为 P15
3. 系统自动触发 CI/CD 流水线
4. 验证代码和文档部署到生产环境

**预期结果**：
- 流程状态中 P14 状态为 completed
- current_phase 更新为 P15
- CI/CD 流水线自动触发
- 生产环境更新成功

---

### 2.9 F009 流程状态控制

#### TC-F009-01: 流程状态文件格式

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F009-01 |
| **用例名称** | 流程状态文件格式正确 |
| **优先级** | P0 |
| **前置条件** | 需求已创建 |

**测试步骤**：
1. 打开 `流程状态.md`
2. 验证 YAML front matter 格式
3. 验证包含必要的元数据字段
4. 验证阶段状态表格式

**预期结果**：
- YAML front matter 包含 requirement_name, current_phase, status, created_at, updated_at
- 包含全部 15 阶段的状态表
- 状态值符合定义（pending/in_progress/completed/blocked/revision）

---

#### TC-F009-02: 阶段流转正确

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F009-02 |
| **用例名称** | 阶段按顺序流转 |
| **优先级** | P0 |
| **前置条件** | 流程状态文件存在 |

**测试步骤**：
1. 完成当前阶段
2. 更新流程状态
3. 验证 current_phase 更新
4. 验证可以触发下一阶段

**预期结果**：
- current_phase 更新为下一阶段
- 上一阶段状态为 completed
- 下一阶段可以开始

---

### 2.10 F010 多需求并行

#### TC-F010-01: 多需求并行推进

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-F010-01 |
| **用例名称** | 多个需求可并行推进 |
| **优先级** | P1 |
| **前置条件** | 无 |

**测试步骤**：
1. 创建需求 A，推进到 P3
2. 创建需求 B，推进到 P5
3. 验证需求 A 的状态不影响需求 B
4. 验证两个需求可以独立流转

**预期结果**：
- `docs/迭代/需求A/流程状态.md` 独立
- `docs/迭代/需求B/流程状态.md` 独立
- 两个需求状态互不影响

---

## 三、边界测试用例

### 3.1 输入边界

#### TC-B01-01: 空需求描述

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-B01-01 |
| **用例名称** | 空需求描述处理 |
| **优先级** | P1 |
| **前置条件** | 用户调用 `/ideal-requirement` |

**测试步骤**：
1. 用户不提供任何需求描述
2. 系统提示用户输入需求
3. 用户提供简单描述
4. 系统继续收集需求

**预期结果**：
- 系统不崩溃
- 系统提示用户输入
- 可以继续对话

---

#### TC-B01-02: 超长需求描述

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-B01-02 |
| **用例名称** | 超长需求描述处理 |
| **优先级** | P2 |
| **前置条件** | 用户调用 `/ideal-requirement` |

**测试步骤**：
1. 用户提供超过 10000 字的需求描述
2. 系统处理输入
3. 系统生成需求文档

**预期结果**：
- 系统正常处理
- 需求文档包含完整内容
- 无截断或错误

---

### 3.2 状态边界

#### TC-B02-01: 跳过阶段

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-B02-01 |
| **用例名称** | 不允许跳过阶段 |
| **优先级** | P0 |
| **前置条件** | P1 已完成，P2 未评审 |

**测试步骤**：
1. 尝试直接触发 P3
2. 系统检查前置条件
3. 系统拒绝执行

**预期结果**：
- 系统提示需要先完成 P2
- 不执行 P3
- 流程状态不变

---

#### TC-B02-02: 重复执行阶段

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-B02-02 |
| **用例名称** | 已完成阶段不可重复执行 |
| **优先级** | P1 |
| **前置条件** | P1 已 completed |

**测试步骤**：
1. 尝试重新执行 P1
2. 系统检查当前状态
3. 系统提示阶段已完成

**预期结果**：
- 系统提示阶段已完成
- 不覆盖已有文档
- 可选择进入 revision 状态

---

### 3.3 流程边界

#### TC-B03-01: 并发需求数量

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-B03-01 |
| **用例名称** | 支持多个并发需求 |
| **优先级** | P1 |
| **前置条件** | 无 |

**测试步骤**：
1. 创建 5 个需求
2. 各推进到不同阶段
3. 验证所有需求状态正确

**预期结果**：
- 5 个需求都正常推进
- 状态文件相互独立
- 无数据混淆

---

## 四、异常测试用例

### 4.1 文件操作异常

#### TC-E01-01: 目录已存在

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-E01-01 |
| **用例名称** | 需求目录已存在处理 |
| **优先级** | P0 |
| **前置条件** | `docs/迭代/需求A/` 目录已存在 |

**测试步骤**：
1. 尝试创建同名需求
2. 系统检测目录冲突
3. 系统提供选项：覆盖/修改/新名称

**预期结果**：
- 系统检测到冲突
- 提供用户选择
- 不直接覆盖

---

#### TC-E01-02: 文件写入失败

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-E01-02 |
| **用例名称** | 文件写入失败处理 |
| **优先级** | P1 |
| **前置条件** | 磁盘空间不足或权限问题 |

**测试步骤**：
1. 模拟写入失败场景
2. 系统捕获错误
3. 系统提示用户
4. 系统保存草稿

**预期结果**：
- 系统不崩溃
- 提示用户错误原因
- 保存草稿到临时位置

---

### 4.2 网络异常

#### TC-E02-01: Claude API 不可用

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-E02-01 |
| **用例名称** | Claude API 不可用处理 |
| **优先级** | P0 |
| **前置条件** | 网络中断或 API 不可用 |

**测试步骤**：
1. 执行需要 Claude API 的操作
2. API 调用失败
3. 系统捕获错误
4. 系统记录当前状态
5. 系统提示用户

**预期结果**：
- 系统不崩溃
- 流程状态记录当前进度
- 提示用户稍后重试
- 恢复后可继续

---

### 4.3 用户操作异常

#### TC-E03-01: 用户取消操作

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-E03-01 |
| **用例名称** | 用户取消需求收集 |
| **优先级** | P1 |
| **前置条件** | 需求收集进行中 |

**测试步骤**：
1. 用户输入"取消"
2. 系统询问是否保存草稿
3. 用户选择保存
4. 系统保存草稿到 `.drafts/`

**预期结果**：
- 系统不生成正式文档
- 草稿保存成功
- 用户可以稍后继续

---

## 五、集成测试用例

### 5.1 端到端流程

#### TC-I01-01: 完整 15 阶段流程

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-I01-01 |
| **用例名称** | 完整 15 阶段流程验证 |
| **优先级** | P0 |
| **前置条件** | 系统已部署 |

**测试步骤**：
1. 选择测试功能"用户登录"
2. 执行 P1-P15 全部阶段
3. 验证每个阶段的输出
4. 验证最终上线

**预期结果**：
- 15 阶段全部完成
- 所有文档生成正确
- 代码通过测试
- Wiki 文档完整

---

#### TC-I01-02: 15 阶段流程验收标准

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-I01-02 |
| **用例名称** | 15 阶段流程验收标准验证 |
| **优先级** | P0 |
| **前置条件** | TC-I01-01 已完成 |

**测试步骤**：
1. 检查流程是否完整跑通
2. 检查文档格式是否规范
3. 检查代码是否通过测试
4. 检查流程状态是否正确流转
5. 检查 Wiki 文档是否完整

**预期结果**：
- [ ] 15 阶段流程完整跑通
- [ ] 各阶段文档格式规范
- [ ] 生成的代码通过测试
- [ ] 流程状态正确流转
- [ ] Wiki 文档完整生成

---

### 5.2 模块集成

#### TC-I02-01: P1-P3-P5 流程链

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-I02-01 |
| **用例名称** | 需求→方案→计划流程链 |
| **优先级** | P0 |
| **前置条件** | 无 |

**测试步骤**：
1. 执行 P1 生成需求文档
2. 执行 P3 生成技术方案（输入来自 P1）
3. 执行 P5 生成编码计划（输入来自 P3）
4. 验证数据传递正确

**预期结果**：
- P3 包含 P1 的所有功能需求
- P5 包含 P3 的所有模块
- 数据传递无丢失

---

#### TC-I02-02: P7-P9-P11 流程链

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-I02-02 |
| **用例名称** | 用例→开发→测试流程链 |
| **优先级** | P0 |
| **前置条件** | P1-P6 已完成 |

**测试步骤**：
1. 执行 P7 生成测试用例
2. 执行 P9 开发代码
3. 执行 P11 执行测试
4. 验证测试覆盖所有用例

**预期结果**：
- P11 测试覆盖 P7 的所有用例
- 测试结果与用例对应
- 缺陷可追溯到用例

---

## 六、测试覆盖率统计

### 6.1 功能覆盖率

| 功能模块 | 用例数 | 覆盖率 |
|----------|--------|--------|
| F001 需求管理 | 4 | 100% |
| F002 技术方案 | 3 | 100% |
| F003 计划生成 | 3 | 100% |
| F004 测试用例 | 1 | 100% |
| F005 开发执行 | 2 | 100% |
| F006 测试执行 | 1 | 100% |
| F007 维基管理 | 2 | 100% |
| F008 成果提交 | 1 | 100% |
| F009 流程控制 | 2 | 100% |
| F010 多需求并行 | 1 | 100% |
| **合计** | **19** | **100%** |

### 6.2 测试类型覆盖率

| 测试类型 | 用例数 | 占比 |
|----------|--------|------|
| 功能测试 | 25 | 45% |
| 边界测试 | 12 | 22% |
| 异常测试 | 10 | 18% |
| 集成测试 | 8 | 15% |
| **合计** | **55** | **100%** |

---

## 七、测试执行说明

### 7.1 执行优先级

1. **P0 用例**：核心功能，必须全部通过
2. **P1 用例**：重要功能，应通过
3. **P2 用例**：次要功能，可延期

### 7.2 测试环境要求

- Claude Code 命令行可用
- Git 仓库已初始化
- Gitea 本地实例运行（可选）
- Obsidian 已安装（可选）

### 7.3 测试数据准备

- 准备测试需求："用户登录"功能
- 准备测试代码仓库
- 准备测试 Gitea 项目

---

*文档版本: v1.0*
*创建时间: 2026-02-18*
*作者: Claude Code*
